Google Refine supports faceted browsing as a mechanism for

  * seeing a big picture of your data, and
  * filtering down to just the subset of rows that you want to change in bulk.

Typically, you create a facet on a particular column. The facet summarizes the cells in that column to give you a big picture on that column, and allows you to filter to some subset of rows for which their cells in that column satisfy some constraint. That's a bit abstract, so let's jump into some examples.

==Default Text Facets==

Consider a data set like this

|| president || died in office || party ||
||  Abraham Lincoln || yes || Republican ||
||  Andrew Johnson || no ||  Democratic ||
||  Ulysses Grant || no || Republican ||
||  Rutherford Hayes || no || Republican ||
||  James Garfield || yes || Republican ||
||  Chester Arthur || no || Republican ||
||  Grover Cleveland || no || Democratic ||
||  Benjamin Harrison || no || Republican ||
||  William McKinley || yes || Republican ||
||  Theodore Roosevelt || no || Republican ||
||  William Taft || no || Republican ||
||  Woodrow Wilson || no || Democratic ||
||  Warren Harding ||  yes || Republican ||
||  Calvin Coolidge || no || Republican ||
|| ... || ... || ... ||

Let's create a text facet on the "party" column (by clicking on that column's drop-down menu and invoke Facet > Text facet). It will show something like this

|| choice || count ||
|| Democratic || 15 ||
|| Republican || 18 ||
|| ... || ... ||

What it is telling you is that there are 15 rows in which the "party" cells contain "Democratic", 18 rows in which the "party" cells contain "Republican", etc. And you, understanding the meaning of this data, might phrase that as: there are 15 democrat presidents, 18 republican presidents, etc. In this way, the facet gives you a big picture of your data, saving you the effort of counting the presidents by their parties yourself.

Now if you click on "Democratic" in the facet, then the data table on the right will display those 15 rows in which the "party" cells contain "Democratic". And you, understanding the meaning of this data, will think: I am currently looking at democrat presidents only. Now, commands that you invoke will affect those rows only, until you clear that facet's selection.

==Multiple Facets==

In addition to the "party" facet, let's create a text facet on the column "died in office". It might show something like this

|| choice || count ||
|| yes || 6 ||
|| no || 37 ||

Selecting something in one facet affects the choices in the other(s). For example, if you select "yes" in the facet "died in office", then that filters the data table to only the 6 
rows where the cells "died in office" contain "yes". Now, the other facet--the facet "party"--will operate only on those 6 rows. And it might now show something like this

|| choice || count ||
|| Democratic || 2 ||
|| Republican || 4 ||

You might phrase that as, "among those presidents who died while in office, 2 were democrats and 4 were republicans."

Likewise, if you don't select anything in the facet "died in office", but you select "Democratic" in the facet "party", then you might conclude something like, "among X democrat presidents, M died while in office while N did not (X = M + N)".

Now, if you select something in *both* facets, then you get the intersection of their effects. For example, if you select "yes" in the facet "died in office" and "Democratic" in the facet "party", then you are now looking at 2 democrat presidents who died while in office.

==Custom Text Facets==

Now let's say you have some hypothesis about the first names that presidents usually have. There is no column for first names, and let's say that you don't want to create a new column for it. That's OK, because we can create a custom text facet that extracts out the first names. Invoke the "president" column's drop-down menu and pick Facet > Custom text facet ... and enter the expression

  value.split(" ")[0]

That facet will show you something like this (sorted by count)

|| choice || count ||
|| James || 5 ||
|| John || 4 ||
|| William || 4 ||
|| George || 3 ||
|| Andrew || 2 ||
|| Thomas || 1 ||
|| Franklin || 2 ||
|| ... || ... ||

==Row-based Text Facets==

Sometimes you want to filter the rows based on no particular column. For example, let's say that you have to apply some operation on a very complicated subset of rows. You can do so by apply some simple facets and filters and star those rows, then apply some other simple facets and filters and star those rows, and so forth. The starring operations are cumulative, producing a union of all those subsets of rows. At the end, you want to select all starred rows to apply an operation on them. You would need to create a text facet with the expression

{{{
  row.starred
}}}

and select "true" in it. You can create such a facet by invoking *any* column's drop-down menu. Or, of course, you could use the very left-most drop-down menu before "All".

==Multi-column-based Text Facets==

Sometimes you want to create a facet that references several columns. For example, consider a data set with two columns for "First Name" and "Last Name". You're interested to find out how many people have the same initial letter for both names (e.g., Marilyn Monroe, Steven Segal, Ophelia Oliver). To do so, create a custom text facet on either column and enter the expression

{{{
  cells["First Name"].value[0] == cells["Last Name"].value[0]
}}}

That shows 2 choices: true and false. Select "true" for the people you want.


==Numeric Facets==

You can also think of a numeric facet as a grouping summary, except that the grouping happens differently than in a text facet. A numeric facet groups rows by numbers contained in cells in some column. The numbers are put into some bins, and then for each bin the rows corresponding to it are counted. The bins are plotted in a histogram.

Perform a custom numeric facet on a column and enter your expression, such as
{{{
value==459822  //this will match any rows that have number 459822 in the column
}}}
or
{{{
value>=10000  //this will match any rows that are greater than or equal to the number 10000.
}}}
==Text Search Facets==

==Custom Facets==
To find 2 or more occurrences of a "," comma character in a string:
{{{
value.split(",").length() > 2
}}}
To cluster or group rows by 1000 use the following custom text facet:
{{{
floor(rowIndex/1000)
}}}
To group by even or odd rows use Jython and modulo operator '%' in custom text facet:
{{{
return rowIndex%2
}}}


(Currently faceting panels have a hard limit of 2000 values shown, and may give an error if exceeded, you will have to partition your data to overcome this limit and be able to display the facet effectively)

You can *save interesting facets* in your project by bookmarking using the *permalink* on Refine's header bar menu.  And even sharing this and your exported project with others.

(The results of individual facet panels can also be exported as TSV by clicking the link in the top left corner of each panel)